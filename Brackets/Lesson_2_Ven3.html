<html>
    <head>
        <script src='d3.v3.min.js'></script>
    </head>
    
    <body>
        <svg></svg>
        
        <script>
            
            d3.csv('athletes_sochi.csv', function(data){
            
                var byCountry = d3.nest()
                    .key(function(d,i){
                    return d.country
                })
                .entries(data)
            
            console.log(byCountry)
            /* output è array dove ogni elemtno è un record raggruppati per Paese */
            
            byCountry.sort(function(a, b){
                return d3.descending(a.values.length, b.values.length)
            })
            
            d3.select('svg')
                .selectAll('rect')
                .data(byCountry)
                .enter()
                .append('rect')
                .attr('width', 15)
                .attr('height', function(d, i){
                    return d.values.length
                })
                .attr('x', function(d, i){
                    return i * 18
                })
            
            
            
            
            })
        </script>
    </body>
</html>
